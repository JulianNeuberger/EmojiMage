[gd_scene load_steps=20 format=3 uid="uid://7yju2kfshk56"]

[ext_resource type="Script" path="res://levels/enemy_spawner.gd" id="1_b78jq"]
[ext_resource type="PackedScene" uid="uid://40mhhmhiflb6" path="res://enemies/basic_enemy.tscn" id="2_ycsx4"]
[ext_resource type="Script" path="res://levels/enemy_spawn.gd" id="3_v1hms"]
[ext_resource type="PackedScene" uid="uid://xmuma7eni4" path="res://wizard/Wizard.tscn" id="4_exd3k"]
[ext_resource type="PackedScene" uid="uid://c37uaabrvavc0" path="res://Inventory/InventoryView.tscn" id="5_8b30p"]
[ext_resource type="Script" path="res://Inventory/Inventory.gd" id="5_71yym"]
[ext_resource type="PackedScene" uid="uid://c7wkav8ts6g4a" path="res://Utils/PauseGame.tscn" id="5_jj0yu"]
[ext_resource type="PackedScene" uid="uid://b100d4col6tvy" path="res://gui/GUIToggle/GUIToggle.tscn" id="5_qy06p"]
[ext_resource type="Resource" uid="uid://bc88g3b5f0yd5" path="res://Wand/DefaultWand.tres" id="6_kwedf"]
[ext_resource type="PackedScene" uid="uid://buhwlr85mkf4s" path="res://gui/PauseMenu/PauseGUI.tscn" id="6_nbq01"]
[ext_resource type="Resource" uid="uid://bsluy5wxafj5e" path="res://Wand/ShotgunWand.tres" id="7_1ycik"]
[ext_resource type="PackedScene" uid="uid://doamhicv54yp6" path="res://PlayerInputs/PlayerGUIHandler.tscn" id="7_3q20r"]
[ext_resource type="PackedScene" uid="uid://bmddgc4p4tad2" path="res://HealthBar/HealthBar.tscn" id="9_sgpnb"]
[ext_resource type="PackedScene" uid="uid://cgqqflee25ey0" path="res://HealthBar/HeathAdapter.tscn" id="10_4v2lf"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uwml0"]
size = Vector2(4, 652)

[sub_resource type="CanvasTexture" id="CanvasTexture_81a6n"]

[sub_resource type="Resource" id="Resource_qc6ed"]
script = ExtResource("3_v1hms")
enemy = ExtResource("2_ycsx4")
amount = 5
delay = 1.5

[sub_resource type="Resource" id="Resource_47ci0"]
script = ExtResource("3_v1hms")
enemy = ExtResource("2_ycsx4")
amount = 10
delay = 0.1

[sub_resource type="Resource" id="Resource_7xwms"]
script = ExtResource("5_71yym")
slots = Array[Resource("res://Wand/WandResource.gd")]([ExtResource("6_kwedf"), ExtResource("7_1ycik"), null])
max_slots = 3

[node name="Testbed" type="Node2D"]

[node name="Walls" type="Node2D" parent="."]

[node name="Wall" type="StaticBody2D" parent="Walls"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall"]
position = Vector2(0, 327)
shape = SubResource("RectangleShape2D_uwml0")

[node name="Sprite2D" type="Sprite2D" parent="Walls/Wall"]
position = Vector2(0, 326)
scale = Vector2(-4.5, 651)
texture = SubResource("CanvasTexture_81a6n")

[node name="Wall2" type="StaticBody2D" parent="Walls"]
position = Vector2(1153, -2)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall2"]
position = Vector2(0, 327)
shape = SubResource("RectangleShape2D_uwml0")

[node name="Sprite2D" type="Sprite2D" parent="Walls/Wall2"]
position = Vector2(0, 326)
scale = Vector2(-4.5, 651)
texture = SubResource("CanvasTexture_81a6n")

[node name="Wall3" type="StaticBody2D" parent="Walls"]
position = Vector2(-3, -2)
rotation = -1.5708
scale = Vector2(1, 1.8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall3"]
position = Vector2(0, 327)
shape = SubResource("RectangleShape2D_uwml0")

[node name="Sprite2D" type="Sprite2D" parent="Walls/Wall3"]
position = Vector2(0, 326)
scale = Vector2(-4.5, 651)
texture = SubResource("CanvasTexture_81a6n")

[node name="Wall4" type="StaticBody2D" parent="Walls"]
position = Vector2(-3, 648)
rotation = -1.5708
scale = Vector2(1, 1.8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall4"]
position = Vector2(0, 327)
shape = SubResource("RectangleShape2D_uwml0")

[node name="Sprite2D" type="Sprite2D" parent="Walls/Wall4"]
position = Vector2(0, 326)
scale = Vector2(-4.5, 651)
texture = SubResource("CanvasTexture_81a6n")

[node name="EnemySpawner" type="Node2D" parent="."]
position = Vector2(564, 298)
script = ExtResource("1_b78jq")
enemy_spawns = Array[ExtResource("3_v1hms")]([SubResource("Resource_qc6ed"), SubResource("Resource_47ci0")])

[node name="Wizard" parent="." instance=ExtResource("4_exd3k")]
position = Vector2(519, 299)
inventory = SubResource("Resource_7xwms")

[node name="Camera2D" type="Camera2D" parent="Wizard"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -25.0
offset_top = -40.0
offset_right = 25.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/margin_left = 25
theme_override_constants/margin_right = 25
theme_override_constants/margin_bottom = 15

[node name="InventoryView" parent="CanvasLayer/MarginContainer" instance=ExtResource("5_8b30p")]
layout_mode = 2

[node name="PauseGame" parent="CanvasLayer" instance=ExtResource("5_jj0yu")]

[node name="GuiToggle" parent="CanvasLayer" instance=ExtResource("5_qy06p")]

[node name="PauseGui" parent="CanvasLayer/GuiToggle" instance=ExtResource("6_nbq01")]
layout_mode = 1

[node name="BuiltInHandler" parent="CanvasLayer" instance=ExtResource("7_3q20r")]

[node name="HealthBar" parent="CanvasLayer" instance=ExtResource("9_sgpnb")]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 0.0
offset_left = -419.0
offset_top = 20.0
offset_right = 419.0
offset_bottom = 94.0
grow_vertical = 1
value = 100.0
can_turn_invisible = false

[node name="HeathAdapter" parent="CanvasLayer/HealthBar" instance=ExtResource("10_4v2lf")]
health_bar = Object(ProgressBar,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":5,"anchor_left":0.5,"anchor_top":0.0,"anchor_right":0.5,"anchor_bottom":0.0,"offset_left":-419.0,"offset_top":20.0,"offset_right":419.0,"offset_bottom":94.0,"grow_horizontal":2,"grow_vertical":1,"rotation":0.0,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":3,"size_flags_vertical":3,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","theme_override_styles/background":null,"theme_override_styles/fill":null,"min_value":0.0,"max_value":100.0,"step":1.0,"page":0.0,"value":100.0,"exp_edit":false,"rounded":false,"allow_greater":false,"allow_lesser":false,"fill_mode":0,"show_percentage":false,"script":Resource("res://HealthBar/HealthBar.gd"),"can_turn_invisible":false)


[connection signal="toggle" from="CanvasLayer/GuiToggle" to="CanvasLayer/PauseGame" method="set_pause"]
[connection signal="close_gui" from="CanvasLayer/GuiToggle/PauseGui" to="CanvasLayer/GuiToggle" method="close"]
[connection signal="on_exit" from="CanvasLayer/BuiltInHandler" to="CanvasLayer/GuiToggle" method="toggle_gui"]
